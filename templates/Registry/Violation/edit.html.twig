{% extends 'base.html.twig' %}

{% set bodyClass = 'registry_violation form edit' %}
{% set menuItem = 'registry_violation' %}

{% block title %}{{ 'registry.violation.title.edit'|trans }} - {{ parent() }}{% endblock %}

{% block body_head %}
    <h1>
        {{ 'registry.violation.title.edit'|trans }}
        <small>{{ form.vars.value }}</small>
    </h1>
{% endblock %}

{% block breadcrumb %}
    {% set breadcrumb = [
        { 'name': 'registry.violation.breadcrumb.list'|trans, 'link': path('registry_violation_list') },
        { 'name': 'registry.violation.breadcrumb.edit'|trans({'%name%': form.vars.value}) }
    ] %}
    {% include '_breadcrumb.html.twig' with {'breadcrumb': breadcrumb} %}
{% endblock %}

{% block body %}
    {{ include('Registry/Violation/_form.html.twig') }}
{% endblock %}

{% block javascripts %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function(){
            traiterBoutons();
        })

        function traiterBoutons() {
            $('select').each(function(){
                const label = $(this).attr('aria-label');
                const dataIdValue = $(this).attr('id');
                const buttonElement = $(`button[data-id="${dataIdValue}"]`);
                if (typeof buttonElement.attr('data-id') === 'undefined'){
                    setTimeout(function(){
                            traiterBoutons()}
                        ,1000
                    )
                }
                buttonElement.removeAttr('role');
                buttonElement.attr('aria-label', label)
            })
        }
    </script>
{% endblock %}
